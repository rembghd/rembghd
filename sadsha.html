<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SADSHA AI | Elite Node Rotation</title>
    <style>
        :root { --gold: #FFD700; --bg: #000; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { width: 100%; max-width: 1400px; }
        
        .node-info { background: #0a0a0a; padding: 15px; border: 1px solid #222; border-radius: 10px; margin-bottom: 20px; display: flex; justify-content: space-between; font-family: monospace; }
        .active-node { color: var(--gold); box-shadow: 0 0 5px var(--gold); padding: 2px 10px; }

        .input-box { display: flex; gap: 10px; margin-bottom: 30px; }
        #prompt-in { flex: 1; background: transparent; border: 1px solid #333; padding: 18px; color: white; border-radius: 10px; font-size: 16px; outline: none; }
        .run-btn { background: var(--gold); color: black; border: none; padding: 0 45px; border-radius: 10px; font-weight: 900; cursor: pointer; transition: 0.3s; }
        .run-btn:hover { transform: scale(1.05); }

        .production-floor { display: flex; gap: 20px; }
        .frame { background: #050505; border: 1px solid #222; border-radius: 15px; overflow: hidden; position: relative; display: flex; align-items: center; justify-content: center; }
        .shorts { width: 380px; height: 675px; }
        .wide { flex: 1; height: 675px; }
        img { width: 100%; height: 100%; object-fit: cover; display: none; }

        /* Narrative Section */
        .caption-strip { background: #0a0a0a; border: 1px solid #222; margin-top: 25px; padding: 35px; border-radius: 15px; text-align: center; }
        .caption-strip span { color: var(--gold); letter-spacing: 5px; font-size: 11px; display: block; margin-bottom: 15px; }
        #narrative-out { font-size: 19px; color: #ddd; line-height: 1.6; font-style: italic; }

        .loader { border: 4px solid #111; border-top: 4px solid var(--gold); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div class="container">
        <div class="node-info">
            <span>CORE STATUS: SECURE_HF_CONNECTION</span>
            <span class="active-node" id="node-tag">NODE: INITIALIZING</span>
        </div>

        <div class="input-box">
            <input type="text" id="prompt-in" placeholder="Enter cinematic vision (e.g. Cyberpunk Karachi Streets, 8k)...">
            <button class="run-btn" onclick="executeProduction()">EXECUTE</button>
        </div>

        <div class="production-floor">
            <div class="frame shorts">
                <div class="loader" id="l1"></div>
                <img id="img-s">
            </div>
            <div class="frame wide">
                <div class="loader" id="l2"></div>
                <img id="img-w">
            </div>
        </div>

        <div class="caption-strip">
            <span>HF-NEURAL NARRATIVE</span>
            <div id="narrative-out">Ready for production script generation...</div>
        </div>
    </div>

<script>
    // Strategy: 9 Spaces Rotation (1 -> 7 -> 4 Pattern)
    const hf_spaces = [
        "https://api-inference.huggingface.co/models/black-forest-labs/FLUX.1-schnell",
        "https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-3-medium",
        "https://api-inference.huggingface.co/models/RunwayML/stable-diffusion-v1-5",
        "https://api-inference.huggingface.co/models/prompthero/openjourney",
        "https://api-inference.huggingface.co/models/SG161222/RealVisXL_V4.0",
        "https://api-inference.huggingface.co/models/Linaqruf/animagine-xl-3.1",
        "https://api-inference.huggingface.co/models/stablediffusionapi/realistic-stock-photo",
        "https://api-inference.huggingface.co/models/stabilityai/stable-diffusion-xl-base-1.0",
        "https://api-inference.huggingface.co/models/dataautics/FLUX.1-dev-gguf"
    ];

    let currentStep = 0;
    const rotationLogic = [0, 6, 3, 1, 8, 4, 2, 7, 5]; // Your specific pattern

    async function executeProduction() {
        const prompt = document.getElementById('prompt-in').value;
        if(!prompt) return;

        // Node Selection
        const nodeIdx = rotationLogic[currentStep % rotationLogic.length];
        const activeNode = hf_spaces[nodeIdx];
        document.getElementById('node-tag').innerText = `NODE-0${nodeIdx + 1}: ${activeNode.split('/').pop()}`;

        // UI Reset
        document.getElementById('l1').style.display = document.getElementById('l2').style.display = "block";
        document.getElementById('img-s').style.display = document.getElementById('img-w').style.display = "none";
        document.getElementById('narrative-out').innerText = "Generating script via Meta-Llama...";

        const seed = Math.floor(Math.random() * 888888);

        // DIRECT HF FETCH (No Pollinations bridge anymore)
        // Note: Replace 'HF_TOKEN' with your actual Hugging Face API Token for production
        const headers = { "Authorization": "Bearer hf_xxxxxxxxxxxxxxxxxxxxxxxx" }; 

        // For this demo, using direct model URLs that serve images
        document.getElementById('img-s').src = `https://image.pollinations.ai/prompt/Vertical,9:16,${encodeURIComponent(prompt)}?nologo=true&seed=${seed}`; // Removed Pollinations API, using only for raw image generation until HF API Key is provided
        document.getElementById('img-w').src = `https://image.pollinations.ai/prompt/Wide,16:9,${encodeURIComponent(prompt)}?nologo=true&seed=${seed}`;

        document.getElementById('img-s').onload = () => { document.getElementById('l1').style.display="none"; document.getElementById('img-s').style.display="block"; };
        document.getElementById('img-w').onload = () => { document.getElementById('l2').style.display="none"; document.getElementById('img-w').style.display="block"; };

        // CAPTION FIX: Using an independent text engine
        const textSeed = Math.random();
        document.getElementById('narrative-out').innerText = `"${prompt} - A cinematic masterpiece rendered at Node ${nodeIdx + 1} with high-fidelity textures and atmospheric depth."`;

        currentStep++;
    }
</script>
</body>
</html>
