<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rembghd - AI Editor</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/selfie_segmentation.js"></script>
    <style>
        :root { --accent: #00f2fe; --bg: #0b1120; --card: #161e2f; }
        body { font-family: sans-serif; background: var(--bg); color: white; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        .header { text-align: center; margin-bottom: 20px; }
        .app-container { display: flex; gap: 20px; max-width: 1100px; width: 100%; }

        /* Left Side: Main Viewport */
        .main-editor { flex: 3; background: var(--card); padding: 30px; border-radius: 25px; border: 1px solid #2d3748; position: relative; }
        .viewport { background: #000; border: 10px solid #2d3748; border-radius: 15px; height: 450px; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        canvas { max-width: 100%; max-height: 100%; z-index: 5; position: relative; }
        
        /* The Mirror Cat */
        .painter-cat { position: absolute; width: 180px; bottom: 20px; right: 20px; z-index: 100; pointer-events: none; }
        .scrubbing { animation: scrub 0.7s infinite alternate ease-in-out; }
        @keyframes scrub { from { transform: translate(0,0) rotate(-5deg); } to { transform: translate(-20px, -30px) rotate(5deg); } }

        /* Right Side: Background Options */
        .side-panel { flex: 1; background: var(--card); padding: 20px; border-radius: 25px; border: 1px solid #2d3748; display: flex; flex-direction: column; gap: 15px; }
        .bg-option { height: 70px; border-radius: 12px; cursor: pointer; border: 2px solid transparent; overflow: hidden; transition: 0.3s; background-size: cover; background-position: center; }
        .bg-option:hover { border-color: var(--accent); }
        .bg-option.active { border-color: var(--accent); box-shadow: 0 0 15px var(--accent); }

        .upload-btn { background: var(--accent); color: #000; padding: 15px 30px; border-radius: 50px; font-weight: bold; cursor: pointer; border: none; margin-bottom: 20px; }
        .footer { margin-top: 40px; font-size: 30px; letter-spacing: 15px; opacity: 0.1; }
    </style>
</head>
<body>

    <div class="header">
        <h1 style="margin:0;">rembghd</h1>
        <p style="opacity:0.5;">One-click AI Background Replacement</p>
    </div>

    <label class="upload-btn">
        âœ“ Upload Image
        <input type="file" id="fileIn" hidden accept="image/*">
    </label>

    <div class="app-container">
        <div class="main-editor">
            <div class="viewport" id="view">
                <canvas id="out"></canvas>
                <img src="https://i.ibb.co/LzNfXF7/image-65166d.png" class="painter-cat" id="cat">
                <div id="loader" style="opacity:0.3;">Waiting for Image...</div>
            </div>
            <div style="margin-top:20px; display:flex; justify-content:space-between; align-items:center;">
                <span style="font-size:12px; opacity:0.6;">ULTRA 4K AI OUTPUT</span>
                <button onclick="download
