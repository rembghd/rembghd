<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rembghd | AI Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/selfie_segmentation.js" crossorigin="anonymous"></script>
    <style>
        :root { --neon: #00f2fe; --bg: #050810; --panel: #0d121f; }
        body { font-family: sans-serif; background: var(--bg); color: white; margin: 0; padding: 20px; text-align: center; }
        .btn { background: var(--neon); color: black; padding: 15px 40px; border-radius: 5px; font-weight: bold; cursor: pointer; border: none; margin: 20px; display: inline-block; }
        .main-container { display: flex; gap: 20px; max-width: 1000px; margin: auto; height: 500px; }
        .editor-area { flex: 3; background: var(--panel); border: 2px solid #1e293b; border-radius: 20px; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        canvas { max-width: 95%; max-height: 95%; }
        #status { position: absolute; font-size: 12px; color: var(--neon); bottom: 10px; }
    </style>
</head>
<body>

    <h1>rembghd</h1>
    
    <label class="btn">
        SELECT IMAGE
        <input type="file" id="up" hidden accept="image/*">
    </label>

    <div class="main-container">
        <div class="editor-area">
            <canvas id="canvas"></canvas>
            <div id="status">INITIALIZING AI...</div>
        </div>
    </div>

    <script>
        const up = document.getElementById('up');
        const cvs = document.getElementById('canvas');
        const ctx = cvs.getContext('2d');
        const status = document.getElementById('status');

        const ai = new SelfieSegmentation({
            locateFile: (f) => `https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${f}`
        });

        ai.setOptions({ modelSelection: 1 });

        // Jab AI load ho jaye
        ai.initialize().then(() => {
            status.innerText = "AI READY: UPLOAD IMAGE NOW";
        }).catch(err => {
            status.innerText = "AI FAILED TO LOAD: CHECK INTERNET OR HTTPS";
            console.error(err);
        });

        ai.onResults((res) => {
            status.innerText = "PROCESSING COMPLETE";
            cvs.width = res.image.width;
            cvs.height = res.image.height;
            ctx.clearRect(0,0,cvs.width,cvs.height);
            ctx.drawImage(res.segmentationMask, 0, 0, cvs.width, cvs.height);
            ctx.globalCompositeOperation = 'source-in';
            ctx.drawImage(res.image, 0, 0);
        });

        up.onchange = (e) => {
            const file = e.target.files[0];
            if(!file) return;
            status.innerText = "AI SCANNING...";
            
            const img = new Image();
            img.src = URL.createObjectURL(file);
            img.onload = () => {
                ai.send({image: img}).catch(err => {
                    status.innerText = "ERROR: AI PROCESS FAILED";
                    console.error(err);
                });
            };
        };
    </script>
</body>
</html>
